<!DOCTYPE html> <html lang="en-US"> <head> <meta charset="UTF-8"> <meta http-equiv="X-UA-Compatible" content="IE=Edge"> <title>Richter - Docs</title> <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> <link rel="stylesheet" href="/assets/css/just-the-docs-default.css"> <script src="/assets/js/just-the-docs.js"></script> <meta name="viewport" content="width=device-width, initial-scale=1"> <!-- Begin Jekyll SEO tag v2.8.0 --> <title>Richter | Docs</title> <meta name="generator" content="Jekyll v3.9.2" /> <meta property="og:title" content="Richter" /> <meta property="og:locale" content="en_US" /> <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <meta property="og:description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description." /> <link rel="canonical" href="http://localhost:4000/pages/dotnet/richter/richter.html" /> <meta property="og:url" content="http://localhost:4000/pages/dotnet/richter/richter.html" /> <meta property="og:site_name" content="Docs" /> <meta property="og:type" content="website" /> <meta name="twitter:card" content="summary" /> <meta property="twitter:title" content="Richter" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"WebPage","description":"Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.","headline":"Richter","url":"http://localhost:4000/pages/dotnet/richter/richter.html"}</script> <!-- End Jekyll SEO tag --> </head> <body> <a class="skip-to-main" href="#main-content">Skip to main content</a> <svg xmlns="http://www.w3.org/2000/svg" style="display: none;"> <symbol id="svg-link" viewBox="0 0 24 24"> <title>Link</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-link"> <path d="M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"></path><path d="M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"></path> </svg> </symbol> <symbol id="svg-search" viewBox="0 0 24 24"> <title>Search</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-search"> <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line> </svg> </symbol> <symbol id="svg-menu" viewBox="0 0 24 24"> <title>Menu</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"> <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line> </svg> </symbol> <symbol id="svg-arrow-right" viewBox="0 0 24 24"> <title>Expand</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-chevron-right"> <polyline points="9 18 15 12 9 6"></polyline> </svg> </symbol> <symbol id="svg-doc" viewBox="0 0 24 24"> <title>Document</title> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-file"> <path d="M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"></path><polyline points="13 2 13 9 20 9"></polyline> </svg> </symbol> <!-- Feather. MIT License: https://github.com/feathericons/feather/blob/master/LICENSE --> <symbol id="svg-external-link" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-external-link"> <title id="svg-external-link-title">(external link)</title> <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path><polyline points="15 3 21 3 21 9"></polyline><line x1="10" y1="14" x2="21" y2="3"></line> </symbol> </svg> <div class="side-bar"> <div class="site-header"> <a href="/" class="site-title lh-tight"> Docs </a> <a href="#" id="menu-button" class="site-button"> <svg viewBox="0 0 24 24" class="icon"><use xlink:href="#svg-menu"></use></svg> </a> </div> <nav aria-label="Main" id="site-nav" class="site-nav"> <ul class="nav-list"><li class="nav-list-item"><a href="#" class="nav-list-expander" aria-label="toggle links in Git category"> <svg viewBox="0 0 24 24"><use xlink:href="#svg-arrow-right"></use></svg> </a><a href="/pages/Git/Git.html" class="nav-list-link">Git</a><ul class="nav-list "><li class="nav-list-item "><a href="/pages/Git/1.%20Git%20Working%20Tree/Working%20Tree%20Update.html" class="nav-list-link">Working Tree Update</a></li><li class="nav-list-item "><a href="/pages/Git/2.%20Git%20Commits/Commit%20Read.html" class="nav-list-link">Commit Read</a></li><li class="nav-list-item "><a href="/pages/Git/2.%20Git%20Commits/Commit%20List.html" class="nav-list-link">Commit List</a></li><li class="nav-list-item "><a href="/pages/Git/2.%20Git%20Commits/Commit%20Create.html" class="nav-list-link">Commit Create</a></li><li class="nav-list-item "><a href="/pages/Git/2.%20Git%20Commits/Commit%20Update.html" class="nav-list-link">Commit Update</a></li><li class="nav-list-item "><a href="/pages/Git/3.%20Git%20Merge/Merge.html" class="nav-list-link">Merge</a></li><li class="nav-list-item "><a href="/pages/Git/4.%20Git%20Branch/Branch%20and%20Head%20Log.html" class="nav-list-link">Branch and Head Log</a></li><li class="nav-list-item "><a href="/pages/Git/4.%20Head/Head.html" class="nav-list-link">Head</a></li><li class="nav-list-item "><a href="/pages/Git/4.%20Git%20Branch/Branch%20Create.html" class="nav-list-link">Branch Create</a></li><li class="nav-list-item "><a href="/pages/Git/4.%20Git%20Branch/Branch%20Update%20Delete.html" class="nav-list-link">Branch Update and Delete</a></li><li class="nav-list-item "><a href="/pages/Git/5.%20Git%20Repository/Repository%20Create.html" class="nav-list-link">Repository Create</a></li><li class="nav-list-item "><a href="/pages/Git/6.%20Git%20Configuration/Configuration.html" class="nav-list-link">Configuration</a></li></ul></li></ul> </nav> <footer class="site-footer"> This site uses <a href="https://github.com/just-the-docs/just-the-docs">Just the Docs</a>, a documentation theme for Jekyll. </footer> </div> <div class="main" id="top"> <div id="main-header" class="main-header"> <div></div> <nav aria-label="Auxiliary" class="aux-nav"> <ul class="aux-nav-list"> <li class="aux-nav-list-item"> <a href="copybook.html" class="site-button" > Тетрадь </a> </li> </ul> </nav> </div> <div id="main-content-wrap" class="main-content-wrap"> <div id="main-content" class="main-content" role="main"> <h2 id="добавить-в-path"> <a href="#добавить-в-path" class="anchor-heading" aria-labelledby="добавить-в-path"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Добавить в PATH: </h2> <p><strong>csc.exe</strong>: <code class="language-plaintext highlighter-rouge">C:\Windows\Microsoft.NET\Framework64\v4.0.30319</code><br /> (Из этой директории компилятор достает MSCorLib.dll)<br /> <strong>ildasm, gacutil</strong>: <code class="language-plaintext highlighter-rouge">C:\Program Files (x86)\Microsoft SDKs\Windows\v10.0A\bin\NETFX 4.8 Tools</code></p> <h2 id="скомпилировать-один-programcs-в-exe"> <a href="#скомпилировать-один-programcs-в-exe" class="anchor-heading" aria-labelledby="скомпилировать-один-programcs-в-exe"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Скомпилировать один Program.cs в .exe </h2> <p>(Building Types into a Module)</p> <details> <summary><code>csc.exe Program.cs</code> (Выполнить в папке, где есть Program.cs)</summary> Нужно использовать в файле <code>using System;</code> вместо использования на компиляции <code>/r:MSCorLib.dll</code> <code>/out:Program.exe /t:exe</code> задавать вручную не нужно, это значения по умолчанию </details> <p>или задать параметры явно: <code class="language-plaintext highlighter-rouge">csc.exe /out:Program.exe /t:exe /r:MSCorLib.dll Program.cs</code></p> <h2 id="ildasm"> <a href="#ildasm" class="anchor-heading" aria-labelledby="ildasm"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Ildasm </h2> <p><code class="language-plaintext highlighter-rouge">ILDasm Program.exe</code> в папке с Program.exe<br /> <code class="language-plaintext highlighter-rouge">Ctrl+M</code> посмотреть метадату<br /> <code class="language-plaintext highlighter-rouge">View/Statistics</code> посмотреть статистику</p> <details> <summary>Что такое CLR-assembly:</summary> To summarize, an assembly is a unit of reuse, versioning, and security. It allows you to partition your types and resources into separate files so that you, and consumers of your assembly, get to determine which files to package together and deploy. After the CLR loads the file containing the manifest, it can determine which of the assembly’s other files contain the types and resources the application is referencing. Anyone consuming the assembly is required to know only the name of the file containing the manifest; the file partitioning is then abstracted away from the consumer and can change in the future without breaking the application’s behavior. If you have multiple types that can share a single version number and security settings, it is recommended that you place all of the types in a single file rather than spread the types out over separate files, let alone separate assemblies. The reason is performance. Loading a file/assembly takes the CLR and Windows time to find the assembly, load it, and initialize it. The fewer files/assemblies loaded the better, because loading fewer assemblies helps reduce working set and also reduces fragmentation of a process’s address space. Finally, NGen.exe can perform better optimizations when processing larger files. </details> <h2 id="скомпилировать-один-programcs-в-dll"> <a href="#скомпилировать-один-programcs-в-dll" class="anchor-heading" aria-labelledby="скомпилировать-один-programcs-в-dll"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Скомпилировать один Program.cs в .dll </h2> <p>В папке с FUT.cs и RUT.cs <code class="language-plaintext highlighter-rouge">csc /out:MultiFileLibrary.dll /t:library /addmodule:RUT.netmodule FUT.cs</code></p> <h2 id="strongly-named--weakly-named-assemblies"> <a href="#strongly-named--weakly-named-assemblies" class="anchor-heading" aria-labelledby="strongly-named--weakly-named-assemblies"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Strongly named &amp; weakly named assemblies </h2> <h2 id="public-assembly-key"> <a href="#public-assembly-key" class="anchor-heading" aria-labelledby="public-assembly-key"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Public Assembly Key </h2> <h2 id="gac"> <a href="#gac" class="anchor-heading" aria-labelledby="gac"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> GAC </h2> <p>Обычно находится в <code class="language-plaintext highlighter-rouge">%SystemRoot%\Microsoft.NET\Assembly</code><br /> <strong>GACUtil.exe</strong> для того чтобы добавлять в GAC сборки. Руками не добавлять!<br /> В GAC устанавливаются только strongly named сборки</p> <h2 id="delay-signing"> <a href="#delay-signing" class="anchor-heading" aria-labelledby="delay-signing"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Delay signing </h2> <h2 id="types"> <a href="#types" class="anchor-heading" aria-labelledby="types"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Types </h2> <p><code class="language-plaintext highlighter-rouge">class Employee {...}</code> идентично <code class="language-plaintext highlighter-rouge">class Employee : System.Object {...}</code><br /> Все типы наследуют от <code class="language-plaintext highlighter-rouge">System.Object</code>, поэтому у все есть методы:<br /> Public: Equals, GetHashCode, ToString, GetType<br /> Protected: MemberwiseClone, Finalize</p> <h2 id="оператор-new"> <a href="#оператор-new" class="anchor-heading" aria-labelledby="оператор-new"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Оператор new </h2> <ul> <li>Вычисляет количество байт для всех филдов, которые будут в экземпляре</li> <li>Аллоцирует память, присваивает нули</li> <li>Инициализирует type object pointer объекта и sync block index members</li> <li>Вызывает конструктора</li> </ul> <h2 id="casting-через-cast-expression-ака-скобки"> <a href="#casting-через-cast-expression-ака-скобки" class="anchor-heading" aria-labelledby="casting-через-cast-expression-ака-скобки"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Casting через cast expression ака скобки </h2> <ul> <li><code class="language-plaintext highlighter-rouge">Object o = new Employee();</code> <strong>Ок</strong></li> <li><code class="language-plaintext highlighter-rouge">Employee e = (Employee) o; </code> <strong>Ок</strong></li> <li> <div class="language-csharp highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="k">internal</span> <span class="k">class</span> <span class="nc">Employee</span>
  <span class="k">internal</span> <span class="k">class</span> <span class="nc">Manager</span> <span class="p">:</span> <span class="n">Employee</span>
  <span class="p">...</span>
  <span class="n">Object</span> <span class="n">o</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">DateTime</span><span class="p">();</span>
  <span class="n">Empoyee</span> <span class="n">e</span> <span class="p">=</span> <span class="p">(</span><span class="n">Employee</span><span class="p">)</span> <span class="n">o</span><span class="p">;</span>
</code></pre></div> </div> <p><strong>Не Ок</strong></p> </li> </ul> <h2 id="операторы-через-is-и-as"> <a href="#операторы-через-is-и-as" class="anchor-heading" aria-labelledby="операторы-через-is-и-as"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Операторы через is и as </h2> <p><strong>is</strong> возвращает true если типы совместимы<br /> Всегда null для false</p> <p><strong>as</strong> присваивает ссылку на объект или null если типы несовместимы</p> <div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Employee e = o as Employee;
    if (e != null) {
    // Use e within the 'if' statement.
    }
</code></pre></div></div> <p>Разница с кастом скобками в том, что при <strong>as</strong> тип проверяется один раз.</p> <h2 id="compile-time-error-cte-vs-run-time-error-rte"> <a href="#compile-time-error-cte-vs-run-time-error-rte" class="anchor-heading" aria-labelledby="compile-time-error-cte-vs-run-time-error-rte"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Compile time error (CTE) vs Run Time Error (RTE) </h2> <p>Страница 123</p> <h2 id="run-time-127"> <a href="#run-time-127" class="anchor-heading" aria-labelledby="run-time-127"><svg viewBox="0 0 16 16" aria-hidden="true"><use xlink:href="#svg-link"></use></svg></a> Run time 127 </h2> <ul> <li>В процессе много? тредов.</li> <li>Метод ?= тред</li> <li>Стек идет от high memory address к low memory address</li> <li> <p>У всех кроме самых простых методов есть prologue code и epilogue code. Стр. 103</p> </li> <li>Создается один процесс. В него загружается CLR.</li> <li>Для каждого треда аллоцируется 1-MB стек (thread stack).</li> <li>Этот стек и будет использоваться для передачи аргументов к методу и для хранения локальных переменных</li> <li>Когда метод начинает выполняться, пролог-код метода аллоцирует память для для локальных переменных метода</li> </ul> </div> </div> </div> </body> </html>
